# Re-Generating Schemas

there are 3 schemas that have to be kept in sync with one another to avoid conflicts:

- schema.prisma
- schema.gql
- schema.generated.ts

## Changes to the Prisma Schema

when schema.prisma changes you must re-run "prisma generate" (`npm run prisma:gen`), this regenerates both the prisma and the pothos types

depending on what models were changed you must find the corresponding models in the pothos type files

ex: if the "User" model changed then you would also have to update `./src/server/gql/type/user.ts` to reflect the change made so that the graphql schema is aware of the change

also anytime the prisma schema changes your [database will need to be reset](../local-env-guides.md/#resetting-your-database) to reflect the changes

## Changes to the Graphql Schema

you are not meant to change "schema.gql" manually, this file is auto generated by "pothos"

the `schema.gql` file will automatically change based on changes to files within `./src/server/gql`, whenever a `builder` function is edited it affects the schema

the schema file is only generated when the `/api/gql` endpoint is hit, so if you do not have the dev server running you'll have to start it and visit `/api/gql` to trigger the the schema file to generate

## Changes to the GQTY Schema

you are not meant to edit `schema.generated.ts` manually, as the file name suggests it's generated by the `gqty:gen` script (`npm run gqty:gen`)

anytime the graphql schema changes the GQTY schema must also be updated / re-generated

you will likely need to see the [`gqty:gen` troubleshooting document](./troubleshooting-faq.md/#gqtygen-es-module-error) as there is a know issue with this script
